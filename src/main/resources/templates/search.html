<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Melo Talk - アーティスト検索</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link th:href="@{/css/style.css}" rel="stylesheet">
</head>

<body>
	<!-- ナビゲーションヘッダー -->
	<header>
		<nav class="navbar navbar-expand-md navbar-light shadow-sm">
			<div class="container-fluid">
				<a class="navbar-brand logo-link" th:href="@{/search}">
					🎵 Melo Talk
				</a>

				<button class="navbar-toggler" type="button" data-bs-toggle="collapse"
					data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
					aria-expanded="false" aria-label="Toggle navigation" style="border-color: #1DB954;">
					<span class="navbar-toggler-icon" style="filter: invert(1);"></span>
				</button>

				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav ms-auto">
						<!-- 未ログインであれば表示する -->
						<li class="nav-item" sec:authorize="isAnonymous()">
							<a class="nav-link" th:href="@{/login}">ログイン</a>
						</li>
						<li class="nav-item" sec:authorize="isAnonymous()">
							<a class="nav-link" th:href="@{/signup}">会員登録</a>
						</li>

						<!-- ログイン済みの一般ユーザーであれば表示する -->
						<li class="nav-item dropdown" sec:authorize="hasRole('ROLE_GENERAL')">
							<a id="navbarDropdownGeneral" class="nav-link dropdown-toggle" href="#" role="button"
								data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" v-pre>
								<span sec:authentication="principal.username"></span>
							</a>

							<div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownGeneral">
								<a class="dropdown-item" href="/user/profile">会員情報</a>
								<a class="dropdown-item" href="/user/playlists">マイプレイリスト</a>
								<a class="dropdown-item" href="/user/favorites">お気に入り</a>

								<div class="dropdown-divider"></div>

								<a class="dropdown-item" th:href="@{/logout}"
									onclick="event.preventDefault(); document.getElementById('logout-form-general').submit();">
									ログアウト
								</a>
								<form id="logout-form-general" class="d-none" th:action="@{/logout}" method="post">
								</form>
							</div>
						</li>

						<!-- ログイン済みの管理者であれば表示する -->
						<li class="nav-item dropdown" sec:authorize="hasRole('ROLE_ADMIN')">
							<a id="navbarDropdownAdmin" class="nav-link dropdown-toggle" href="#" role="button"
								data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" v-pre>
								管理者メニュー
							</a>

							<div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownAdmin">
								<a class="dropdown-item" href="/admin/users">会員一覧</a>
								<a class="dropdown-item" href="/admin/songs">楽曲管理</a>
								<a class="dropdown-item" href="/admin/artists">アーティスト管理</a>

								<div class="dropdown-divider"></div>

								<a class="dropdown-item" th:href="@{/logout}"
									onclick="event.preventDefault(); document.getElementById('logout-form-admin').submit();">
									ログアウト
								</a>
								<form id="logout-form-admin" class="d-none" th:action="@{/logout}" method="post"></form>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</nav>
	</header>

	<div class="container-fluid content-wrapper">
		<div class="row">
			<!-- サイドバー -->
			<nav class="col-md-2 sidebar">
				<a th:href="@{/}">🏠 ホーム</a>
				<a th:href="@{/search}">🔍 検索</a>
				<a href="#" sec:authorize="isAuthenticated()">📁 ライブラリ</a>
				<a href="#" sec:authorize="isAuthenticated()">❤️ お気に入り</a>
				<a href="#" sec:authorize="isAuthenticated()">📝 プレイリスト</a>
			</nav>

			<!-- メインコンテンツ -->
			<main class="col-md-10 main-content">
				<!-- 検索バー -->
				<div class="search-header">
					<div class="search-container">
						<input type="text" id="searchInput" class="search-input" placeholder="楽曲やアーティストを検索...">
						<div id="searchSuggestions" class="search-suggestions"></div>
					</div>
				</div>

				<div class="container-fluid">
					<div class="results" id="results">
						<div class="text-center mt-5" style="color: #b3b3b3;">
							<h3>音楽を検索しよう</h3>
							<p>お気に入りのアーティストを見つけてください</p>
						</div>
					</div>
				</div>
			</main>
		</div>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script src="/js/music-share.js"></script>
</body>

</html>